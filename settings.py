try:
    import pygame
except ModuleNotFoundError:
    pygame = None

# Colors
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
DARKGREY = (40, 40, 40)
LIGHTGREY = (100, 100, 100)
GREEN = (0, 255, 0)
RED = (255, 0, 0)
YELLOW = (255, 255, 0)
BLUE = (0, 0, 255)
CYAN = (0, 255, 255)

# Dirt Colors (Shades of Brown)
DIRT_LIGHT = (160, 130, 90)
DIRT_DARK = (139, 100, 60)
DIRT_MEDIUM = (150, 115, 75)
GRASS_GREEN = (34, 139, 34)

# Drift Mode Colors
ASPHALT = (50, 50, 50)
SIDEWALK = (80, 80, 80)
BUILDING_WALL = (60, 60, 70)
BUILDING_ROOF = (40, 40, 50)
BUILDING_LIGHT = (255, 255, 200) # For windows

# Stunt Mode Colors
STUNT_ROAD = (100, 100, 200) # Blueish tarmac
STUNT_WALL = (200, 50, 50)
BRIDGE_COLOR = (150, 150, 150)
RAMP_COLOR = (255, 200, 0)
PIT_COLOR = (20, 20, 20) # Deep dark pit

# Game Settings
WIDTH = 1024
HEIGHT = 768
FPS = 60
TITLE = "Retro Racer 2D - Rally Edition"
BGCOLOR = GRASS_GREEN # Default background is now grass

# Tile Settings
TILESIZE = 16
GRIDWIDTH = WIDTH / TILESIZE
GRIDHEIGHT = HEIGHT / TILESIZE

# Map Layout
# 1 = Wall/Grass, . = Road, P = Player Start, F = Finish Line, C = Checkpoint
GAME_MAP = [
    "1111111111111111111111111111111111111111111111111111111111111111",
    "111111111.............11111111111111111111111111.........1111111",
    "11111.......................................................1111",
    "1111FP.......................................................111",
    "111..F........................................................11",
    "11...F.........................................................1",
    "1.....F........................................................1",
    "1.....F........................................................1",
    "1......F.......................................................1",
    "1......FF1111111111111.........................11111111........1",
    "........111111111111111111111111111.1111111111111111111........1",
    "........11111111111111111111111111111111111111111111111........1",
    "........11111111111111111111111111111111111111111111111........1",
    "........1111111111111111111111111111111111111111111111.........1",
    "1........111111111111111111111111111111111111111111111........11",
    "1........111111111111111111111111111111111111111111111........11",
    "1........11111111111111111111111111111111111111111111.........11",
    "1........11111111111111111111111111111111111111111111........111",
    "1........11111111111111111111111111111111111111111111........111",
    "1.........111111111111111111111111111111111111111111.........111",
    "11........111111111111111111111111111111111111111111........1111",
    "11........111111111111111111111111111111111111111111........1111",
    "11........111111111111111111111111111111111111111111........1111",
    "11........111111111111111111111111111111111111111111........1111",
    "11........11111111111111111111111111111111111111111.........1111",
    "11........111111111111111111111111111111111111111111........1111",
    "11.........111111111111111111111111111111111111111111........1111",
    "11........111111111111111111111111111111111111111111........1111",
    "11........111111111111111111111111111111111111111111........1111",
    "11........111111111111111111111111111111111111111111.........111",
    "11........1111111111111111111111111111111111111111111........111",
    "11........1111111111111111111111111111111111111111111.........11",
    "11........1111111111111111111111111111111111111111111.........11",
    "1........111111111111111111111111111111111111111111111........11",
    "1........111111111111111111111111111111111111111111111.........1",
    "1........1111111111111111111111111111111111111111111111........1",
    "1........1111111111111111111111.11111111111111111111111C.......1",
    "1........1111111111111...................11111111111111C.......1",
    "1........1111111...............................111111111C.......",
    "1.......................................................C.......",
    "1........................................................C......",
    "1........................................................C......",
    "1.........................................................C....1",
    "11........................................................C....1",
    "111........................................................C..11",
    "1111...................111111111111111111..................C.111",
    "111111...........111111111111111111111111111111............11111",
    "1111111111111111111111111111111111111111111111111111111111111111",
]

BRANDS_HATCH_MAP = [
    "1111111111111111111111111111111111111111111111111111111111111111",
    "111.............................................1111111111111111",
    "111..............................................111111111111111",
    "111...............................................11111111111111",
    "111................................................1111111111111",
    "111................................................1111111111111",
    "111................................................1111111111111",
    "111......111111111111111111111111111111111111......1111111111111",
    "111......111111111111111111111111111111111111......1111111111111",
    "111......111111111111111111111111111111111111......1111111111111",
    "111......111111111111111111111111111111111111......1111111111111",
    "111......1111111...................................1111111111111",
    "111......111111....................................1111111111111",
    "111......11111.....................................1111111111111",
    "111......11111.....................................1111111111111",
    "111......11111....................................11111111111111",
    "111......11111...................................111111111111111",
    "111......11111......11111111111111111111111111111111111111111111",
    "111......11111......1111111111111111111111111..........111111111",
    "111......11111......111111111111111111111111............11111111",
    "111FFFFFF11111......11111111111111111111111..............1111111",
    "111...P..11111......1111111111111111111111................111111",
    "111......11111......1111111111111111111111.................11111",
    "111......11111......111111111111111111111...................1111",
    "111......11111......11111111111111111111....................1111",
    "111......11111...................................111........1111",
    "111......11111..................................11111.......1111",
    "111......11111.................................111111.......1111",
    "111......11111................................1111111.......1111",
    "111......11111...............................11111111.......1111",
    "111......111111.............................111111111CCCCCCC1111",
    "111......11111111111111111111111111111111111111111111.......1111",
    "111......11111111111111111111111111111111111111111111.......1111",
    "111......11111111111111111111111111111111111111111111.......1111",
    "111......11111111111111111111111111111111111111111111.......1111",
    "111......11111111111111111111111111111111111111111111.......1111",
    "111......1111111111111111111111111111111111111111111........1111",
    "111......111111111111111111111111111111111111111111.........1111",
    "111......11111111111111111111111111111111111111111..........1111",
    "111......1111111111111111111111111111111111111111...........1111",
    "111.......11111111111111111111111111111111111111............1111",
    "111........................................................11111",
    "111.......................................................111111",
    "111......................................................1111111",
    "111.....................................................11111111",
    "1111...................................................111111111",
    "11111.................................................1111111111",
    "1111111111111111111111111111111111111111111111111111111111111111",
]

STUNT_MAP = [
    "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW",
    "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW",
    "WW....^..XX..v....^..XX..v....WW",
    "WW.P..^..XX..v....^..XX..v....WW",
    "WW....^..XX..v....^..XX..v....WW", 
    "WW....^..XX..v....^..XX..v....WW",
    "WW....^..XX..v....^..XX..v....WW",
    "WW....^..XX..v....^..XX..v....WW", # Top straight extended
    "WW....WWWWWWWWWWWWWWWWWWWW....WW", # WIDENED SIDES: Now 4 dots wide on Left and Right
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....WWWWWWWWWWWWWWWWWWWW....WW",
    "WW....vv..XX..^....v..XX..^...WW", # Bottom straight extended
    "WW....vv..XX..^....v..XX..^...WW",
    "WW....vv..XX..^....v..XX..^...WW",
    "WW....vv..XX..^....v..XX..^...WW",
    "WW....vv..XX..^....v..XX..^...WW",
    "WW....vv..XX..^....v..XX..^...WW",
    "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW",
    "WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW"
]

# Player Settings (Defaults, overridden by car models)
PLAYER_SPEED = 400
PLAYER_ROT_SPEED = 200
PLAYER_MAX_SPEED = 500
PLAYER_HIT_RECT = pygame.Rect(0, 0, 15, 15) if pygame else (0, 0, 15, 15)
BARREL_OFFSET = (20, 10)

# Car Models
CAR_MODELS = [
    {"name": "Focus RS", "color": (0, 70, 220), "accel": 400, "max_speed": 650, "grip": 0.95, "drag": 0.992, "friction": 150},
    {"name": "Subaru WRX", "color": (0, 50, 200), "accel": 420, "max_speed": 640, "grip": 0.96, "drag": 0.991, "friction": 160},
    {"name": "Evo X", "color": (220, 20, 20), "accel": 410, "max_speed": 645, "grip": 0.94, "drag": 0.992, "friction": 150},
    {"name": "Citroen C3", "color": (180, 20, 20), "accel": 430, "max_speed": 620, "grip": 0.97, "drag": 0.990, "friction": 170},
    {"name": "Toyota Yaris", "color": (230, 230, 230), "accel": 450, "max_speed": 610, "grip": 0.98, "drag": 0.989, "friction": 180},
    {"name": "Audi Quattro", "color": (240, 240, 200), "accel": 380, "max_speed": 680, "grip": 0.92, "drag": 0.995, "friction": 140},
    {"name": "Lancia Delta", "color": (20, 20, 100), "accel": 390, "max_speed": 660, "grip": 0.93, "drag": 0.993, "friction": 145},
    {"name": "Peugeot 205", "color": (255, 215, 0), "accel": 440, "max_speed": 630, "grip": 0.95, "drag": 0.990, "friction": 160},
    {"name": "Mini Cooper", "color": (0, 100, 0), "accel": 460, "max_speed": 600, "grip": 0.99, "drag": 0.985, "friction": 200},
    {"name": "Porsche 911", "color": (200, 200, 200), "accel": 480, "max_speed": 720, "grip": 0.85, "drag": 0.994, "friction": 120} # Drift Monster
]
